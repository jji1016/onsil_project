<!DOCTYPE html>
<html lang="en">
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/mainPageHead :: commonHead(
  'ìƒí’ˆ ë¦¬ë·°',
  ${{'/css/review.css'}},
null
)"></head>
<body>
<header class="header" th:replace="~{fragments/mainPageHeader}"></header>
<div id="section">
    <div class="top-title">
        <div class="txt">
            <p>REVIEW</p>
            <h2>ì†Œì¤‘í•œ í›„ê¸°ë¥¼ ë“¤ë ¤ì£¼ì„¸ìš”</h2>
            <p>ê½ƒì„ ë°›ì•„ë³´ì‹  ìˆœê°„, ì–´ë– ì…¨ë‚˜ìš”? ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ê°€ ë˜ ë‹¤ë¥¸ ë”°ëœ»í•œ ì„ ë¬¼ì´ ë©ë‹ˆë‹¤</p>
        </div>
    </div>

    <div class="wrap-review-all">

        <!-- ì£¼ë¬¸ì •ë³´ -->
        <div class="wrap-cont">
            <div class="order-info">
                <h2>ì£¼ë¬¸ì •ë³´</h2>
                <table>
                    <tr>
                        <td>ì£¼ë¬¸ìƒí’ˆëª…</td>
                        <td id="item-name" th:text="${productName}"></td>
                    </tr>
                    <tr>
                        <td>ë‹‰ë„¤ì„</td>
                        <td id="user-name" th:text="${memberNickName}"></td>
                    </tr>
                </table>
            </div>

            <div class="review-write">
                <h2>ë¦¬ë·°ì‘ì„±</h2>
                <form th:action="@{/review/write}" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="productId" th:value="${productId}"/>
                    <input type="hidden" name="subscribeId" th:value="${subscribeId}"/>
                    <ul>
                        <li class="asterion">
                            <h3>ìƒí’ˆë§Œì¡±ë„</h3>
                            <div class="vote">
                                <div class="star" data-value="1"></div>
                                <div class="star" data-value="2"></div>
                                <div class="star" data-value="3"></div>
                                <div class="star" data-value="4"></div>
                                <div class="star" data-value="5"></div>
                            </div>
                        </li>
                        <li class="review-txt">
                            <h3>ì–´ë–¤ì ì´ ì¢‹ìœ¼ì…¨ì–´ìš”?</h3>
                            <textarea name="content" class="review-box" placeholder="ìµœì†Œ 10ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”."></textarea>
                        </li>
                    </ul>
                    <div class="photo">
                        <label for="photo-upload" class="btn-upload">ğŸ“·<br>ì‚¬ì§„ ì˜¬ë¦¬ê¸°</label>
                        <input type="file" id="photo-upload" name="imageFile" accept="image/*" multiple
                               style="display:none;">
                    </div>
                    <div class="btn">
                        <button type="submit">ë“±ë¡</button>
                        <button type="button"><a href="mypage.html">ì·¨ì†Œ</a></button>
                    </div>
                    <input type="hidden" name="rating" id="rating" value="0">
                </form>
            </div>
        </div>
    </div>

</div>
<footer class="footer" th:replace="~{fragments/mainPageFooter}"></footer>
<script>
    document.querySelectorAll('.star').forEach(function (star, idx) {
        star.addEventListener('click', function () {
            const ratingValue = this.dataset.value;
            document.getElementById('rating').value = ratingValue;

            // ë³„ ìƒ‰ìƒ ë°˜ì˜ (ì˜ˆ: í™œì„±í™”ëœ ë³„ì€ .active í´ë˜ìŠ¤ ì¶”ê°€)
            document.querySelectorAll('.star').forEach((s, i) => {
                s.classList.toggle('active', i < ratingValue);
            });
        });
    });
</script>
<script>
    document.querySelector('form').addEventListener('submit', function (e) {
        const rating = document.getElementById('rating').value;
        if (parseInt(rating) === 0) {
            alert("ë³„ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
            e.preventDefault();
        }
    });
</script>
</body>
</html>